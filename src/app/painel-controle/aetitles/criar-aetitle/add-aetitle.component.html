<h2 class="mb-25" mat-dialog-title>Adicionar Application Entity</h2>

<mat-dialog-content>
    <!-- Tipo de Aetitle -->
    <mat-form-field appearance="outline" class="w-100 mb-25">
        <mat-label>Tipo de Aetitle</mat-label>
        <mat-select [(value)]="aetitleType" (selectionChange)="onTypeChange()">
            <mat-option value="export">Externo</mat-option>
            <mat-option value="storage">Storage</mat-option>
            <mat-option value="worklist">Worklist</mat-option>
        </mat-select>
    </mat-form-field>

    <!-- Templates dinâmicos -->
    <div [ngSwitch]="aetitleType">
        <!-- Externo -->
        <div *ngSwitchCase="'export'">
            <mat-form-field appearance="outline" class="mb-25 mt-25 w-100">
                <mat-label>Aetitle de exportação</mat-label>
                <input matInput placeholder="Aetitle de exportação" [(ngModel)]="exportData.aetitle">
            </mat-form-field>

            <mat-slide-toggle [(ngModel)]="exportData.useExisting" (change)="onSwitchChange()">
                Escolher destino existente?
            </mat-slide-toggle>

            <!-- Destino existente -->
            <div *ngIf="exportData.useExisting" class="mt-3 mb-25">
                <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Destinos cadastrados</mat-label>
                    <mat-select [(value)]="exportData.selectedDestination">
                        <mat-option *ngFor="let destination of destinations" [value]="destination.id">
                            {{ destination.name }}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>

            <!-- Novo destino -->
            <div *ngIf="!exportData.useExisting" class="mt-3">
                <mat-form-field appearance="outline" class="w-100 mb-25">
                    <mat-label>Aetitle de destino</mat-label>
                    <input matInput placeholder="Aetitle de destino" [(ngModel)]="exportData.newDestination.aetitle">
                </mat-form-field>
                <mat-form-field appearance="outline" class="w-100 mb-25">
                    <mat-label>Host</mat-label>
                    <input matInput placeholder="Host" [(ngModel)]="exportData.newDestination.host">
                </mat-form-field>
                <mat-form-field appearance="outline" class="w-100 mb-25">
                    <mat-label>Porta</mat-label>
                    <input matInput type="number" placeholder="Porta" [(ngModel)]="exportData.newDestination.port">
                </mat-form-field>
            </div>
        </div>

        <!-- Storage -->
        <div *ngSwitchCase="'storage'">
            <mat-form-field appearance="outline" class="w-100 mb-25">
                <mat-label>Aetitle</mat-label>
                <input matInput placeholder="Nome do Aetitle" [(ngModel)]="storageData.aetitle">
            </mat-form-field>
            <mat-form-field appearance="outline" class="w-100">
                <mat-label>Permissões de visualização (Aetitles)</mat-label>
                <mat-select multiple [(value)]="storageData.permissions">
                    <mat-option *ngFor="let permission of permissions" [value]="permission.id">
                        {{ permission.name }}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>

        <!-- Worklist -->
        <div *ngSwitchCase="'worklist'">
            <p>Template Worklist (a implementar).</p>
        </div>
    </div>
</mat-dialog-content>

<mat-dialog-actions align="end">
    <button mat-button mat-dialog-close>Cancelar</button>
    <button mat-raised-button color="primary" (click)="onSave()">Salvar</button>
</mat-dialog-actions>
